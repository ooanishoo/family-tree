#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo 'ğŸ”¬Running pre-commit scripts before committing'

# Check Prettier standards
echo '
==================================
ğŸ’…ğŸ» Checking Prettier standards ğŸ’…ğŸ»
==================================
'
npm run check-format ||
(
    echo 'ğŸ’…ğŸ» Prettier Check Failed. Run npm run format, add changes and try commit again.';
    false;
)

# Check ESLint Standards
echo '
==================================
ğŸš¦ Checking Eslint standards ğŸš¦
==================================
'
npm run check-lint ||
(
  echo 'ğŸ’¨ ESLint Check Failed. Make the required changes listed above, add changes and try to commit again.'
  false; 
)

# Check tsconfig standards
echo '
==================================
ğŸ’» Checking tsconfig standards ğŸ’»
==================================
'
npm run check-types ||
(
    echo 'ğŸ‘®ğŸ»â€â™‚ï¸ Type check failed. Make the required changes listed above, add changes and try to commit again.'
    false;
)

echo '
==================================
ğŸ“¦ Running build now. ğŸ“¦ 
==================================
'
npm run build ||
(
    echo 'ğŸš¨ Next build failed: View the errors above to see why.'
    false;
)

# If everything passes... Now we can commit
echo '
==================================
âœ… All checks passed. âœ… 
ğŸ§‘ğŸ»â€ğŸ’» Committing the changes now ğŸ§‘ğŸ»â€ğŸ’» 
==================================
'
